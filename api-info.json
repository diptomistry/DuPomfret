{
  "API Documentation": "AI API Platform - Complete Course Management System",
  "Base URL": "https://your-api-domain.com",
  "Authentication": "Bearer Token required for most endpoints",
  "Description": "Comprehensive course API with content management, RAG search, AI generation, chat, and validation",
  
  "endpoints": {
    "admin_content_ingest": {
      "method": "POST",
      "path": "/admin/content/ingest",
      "description": "Ingest course content into CMS and vector database (admin workflow)",
      "authentication": "Required",
      "request_examples": {
        "theory_slide": {
          "course_id": "550e8400-e29b-41d4-a716-446655440000",
          "category": "theory",
          "content_type": "slide",
          "file_url": "https://cloudflare-r2.example.com/courses/week3-avl-trees.pdf",
          "week": 3,
          "topic": "AVL Tree",
          "tags": ["tree", "rotation", "balancing"],
          "language": null
        },
        "lab_code": {
          "course_id": "550e8400-e29b-41d4-a716-446655440000",
          "category": "lab",
          "content_type": "code",
          "file_url": "https://cloudflare-r2.example.com/labs/avl-implementation.py",
          "week": 3,
          "topic": "AVL Tree Implementation",
          "tags": ["implementation", "python", "tree"],
          "language": "python"
        }
      },
      "response_example": {
        "message": "Content ingested successfully",
        "chunks": 12,
        "content_id": "content-abc123-xyz789"
      }
    },
    
    "course_search": {
      "method": "POST",
      "path": "/courses/{course_id}/search",
      "description": "Course-scoped semantic search with metadata filtering and answer generation",
      "authentication": "Required",
      "path_parameters": {
        "course_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "request_examples": {
        "general_query": {
          "query": "What is an AVL tree and how does it maintain balance?",
          "category": null,
          "topic": null,
          "language": null,
          "top_k": 5
        },
        "theory_only": {
          "query": "Explain the time complexity of AVL tree operations",
          "category": "theory",
          "topic": null,
          "language": null,
          "top_k": 5
        },
        "lab_python": {
          "query": "How do I implement rotation in Python?",
          "category": "lab",
          "topic": "AVL Tree Implementation",
          "language": "python",
          "top_k": 5
        }
      },
      "response_example": {
        "answer": "An AVL tree is a self-balancing binary search tree where the heights of the two child subtrees of any node differ by at most one. It maintains balance through rotation operations (single and double rotations) performed after insertions and deletions.",
        "sources": [
          {
            "content": "AVL trees use four types of rotations to maintain balance: left rotation, right rotation, left-right rotation, and right-left rotation.",
            "metadata": {
              "type": "slide",
              "source": "week3-avl-trees.pdf",
              "url": "https://cloudflare-r2.example.com/courses/week3-avl-trees.pdf",
              "user_id": null
            }
          }
        ]
      }
    },
    
    "course_search_images": {
      "method": "POST",
      "path": "/courses/{course_id}/search/images",
      "description": "Course-scoped image search using CLIP embeddings",
      "authentication": "Required",
      "path_parameters": {
        "course_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "request_example": {
        "query": "AVL tree rotation diagram",
        "top_k": 8,
        "min_similarity": 0.7
      },
      "response_example": {
        "results": [
          {
            "url": "https://cloudflare-r2.example.com/diagrams/avl-rotation.png",
            "similarity": 0.91,
            "content": "avl_tree_rotation_diagram",
            "metadata": {
              "category": "theory",
              "topic": "AVL Tree",
              "week": 3,
              "tags": ["rotation", "visualization"]
            }
          }
        ]
      }
    },
    
    "list_namespaces": {
      "method": "GET",
      "path": "/namespaces",
      "description": "List all available course namespaces",
      "authentication": "Required",
      "request_example": "No body required",
      "response_example": {
        "namespaces": [
          "550e8400-e29b-41d4-a716-446655440000",
          "course-cs101-fall2024",
          "course-cs201-spring2025"
        ]
      }
    },
    
    "generate_course_media": {
      "method": "POST",
      "path": "/courses/{course_id}/media/generate",
      "description": "Generate educational media from course materials",
      "authentication": "Required",
      "path_parameters": {
        "course_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "request_examples": {
        "content_to_video": {
          "type": "content-to-video",
          "material_id": "material-abc123-xyz789",
          "style": "lecture"
        },
        "slides_to_video": {
          "type": "slides-to-video",
          "material_id": "material-def456-uvw012",
          "style": "whiteboard"
        },
        "theory_diagram": {
          "type": "theory-diagram",
          "material_id": "material-ghi789-rst345",
          "style": "lecture"
        }
      },
      "response_example": {
        "type": "content-to-video",
        "url": "https://cloudflare-r2.example.com/videos/generated-lecture-abc123.mp4",
        "prompt": "Generated lecture-style video explaining AVL tree rotations",
        "input_images": [
          "https://cloudflare-r2.example.com/slides/avl-slide1.png"
        ]
      }
    },
    
    "storage_upload": {
      "method": "POST",
      "path": "/storage/upload",
      "description": "Upload file to Cloudflare R2 storage",
      "authentication": "Required",
      "content_type": "multipart/form-data",
      "request_example": {
        "file": "<binary file data>",
        "file_type": "pdf",
        "folder": "courses/cs101/week5"
      },
      "response_example": {
        "url": "https://cloudflare-r2-public.example.com/courses/cs101/week5/algorithms.pdf",
        "provider": "cloudflare_r2",
        "key": "courses/cs101/week5/algorithms.pdf",
        "file_type": "pdf",
        "content_type": "application/pdf",
        "size_bytes": 3456789
      }
    },
    
    "create_course": {
      "method": "POST",
      "path": "/admin/courses",
      "description": "Create a new course (admin API)",
      "authentication": "Required",
      "request_example": {
        "code": "CSE220",
        "title": "Data Structures and Algorithms",
        "description": "Comprehensive study of fundamental data structures and algorithms"
      },
      "response_example": {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "code": "CSE220",
        "title": "Data Structures and Algorithms",
        "description": "Comprehensive study of fundamental data structures and algorithms"
      }
    },
    
    "list_courses": {
      "method": "GET",
      "path": "/courses",
      "description": "List all courses",
      "authentication": "Required",
      "request_example": "No body required",
      "response_example": [
        {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "code": "CSE220",
          "title": "Data Structures and Algorithms",
          "description": "Comprehensive study of fundamental data structures and algorithms"
        },
        {
          "id": "550e8400-e29b-41d4-a716-446655440001",
          "code": "CSE111",
          "title": "Introduction to Programming",
          "description": "Foundational programming concepts using Python"
        }
      ]
    },
    
    "get_course": {
      "method": "GET",
      "path": "/courses/{course_id}",
      "description": "Get details for a single course",
      "authentication": "Required",
      "path_parameters": {
        "course_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "request_example": "No body required",
      "response_example": {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "code": "CSE220",
        "title": "Data Structures and Algorithms",
        "description": "Comprehensive study of fundamental data structures and algorithms"
      }
    },
    
    "list_course_contents": {
      "method": "GET",
      "path": "/courses/{course_id}/contents",
      "description": "Browse course contents with optional filters",
      "authentication": "Required",
      "path_parameters": {
        "course_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "query_parameters_examples": {
        "all_contents": {},
        "theory_only": {
          "category": "theory"
        },
        "week_specific": {
          "week": 4
        },
        "lab_week_4": {
          "category": "lab",
          "week": 4
        }
      },
      "response_example": [
        {
          "id": "content-abc123",
          "course_id": "550e8400-e29b-41d4-a716-446655440000",
          "category": "theory",
          "title": "AVL Tree Fundamentals",
          "week": 3,
          "topic": "AVL Tree",
          "tags": ["tree", "rotation", "balancing"],
          "content_type": "slide",
          "file_url": "https://cloudflare-r2.example.com/courses/week3-avl-trees.pdf",
          "language": null
        },
        {
          "id": "content-def456",
          "course_id": "550e8400-e29b-41d4-a716-446655440000",
          "category": "lab",
          "title": "AVL Tree Implementation",
          "week": 3,
          "topic": "AVL Tree Implementation",
          "tags": ["implementation", "python"],
          "content_type": "code",
          "file_url": "https://cloudflare-r2.example.com/labs/avl-implementation.py",
          "language": "python"
        }
      ]
    },
    
    "generate_theory": {
      "method": "POST",
      "path": "/courses/{course_id}/generate/theory",
      "description": "Generate exam-oriented theory material for a topic",
      "authentication": "Required",
      "path_parameters": {
        "course_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "request_examples": {
        "exam_oriented": {
          "topic": "Binary Search Tree",
          "depth": "exam-oriented"
        },
        "conceptual": {
          "topic": "Graph Traversal Algorithms",
          "depth": "conceptual"
        }
      },
      "response_example": {
        "id": "material-theory-abc123",
        "course_id": "550e8400-e29b-41d4-a716-446655440000",
        "category": "theory",
        "prompt": "Generate exam-oriented theory material for Binary Search Tree",
        "output": "# Binary Search Tree (BST)\n\n## Definition\nA Binary Search Tree is a binary tree where for each node:\n- All values in the left subtree are less than the node's value\n- All values in the right subtree are greater than the node's value\n\n## Time Complexity\n- Search: O(h) where h is height\n- Insert: O(h)\n- Delete: O(h)\n- In balanced tree: O(log n)\n- In worst case (skewed): O(n)\n\n## Key Properties\n1. Inorder traversal yields sorted sequence\n2. Height determines operation efficiency\n3. Self-balancing variants (AVL, Red-Black) ensure O(log n)",
        "supported_languages": null,
        "grounding_score": 0.92
      }
    },
    
    "generate_lab": {
      "method": "POST",
      "path": "/courses/{course_id}/generate/lab",
      "description": "Generate lab explanation with code implementation",
      "authentication": "Required",
      "path_parameters": {
        "course_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "request_examples": {
        "python_implementation": {
          "topic": "BST insertion",
          "language": "python"
        },
        "java_implementation": {
          "topic": "AVL tree rotation",
          "language": "java"
        },
        "cpp_implementation": {
          "topic": "Graph BFS traversal",
          "language": "c++"
        }
      },
      "response_example": {
        "id": "material-lab-def456",
        "course_id": "550e8400-e29b-41d4-a716-446655440000",
        "category": "lab",
        "prompt": "Generate lab explanation and code for BST insertion in python",
        "output": "# BST Insertion - Python Implementation\n\n## Concept\nInsertion in a BST follows the property that smaller values go left and larger values go right.\n\n## Implementation\n\n```python\nclass TreeNode:\n    def __init__(self, val):\n        self.val = val\n        self.left = None\n        self.right = None\n\nclass BST:\n    def __init__(self):\n        self.root = None\n    \n    def insert(self, val):\n        if not self.root:\n            self.root = TreeNode(val)\n        else:\n            self._insert_helper(self.root, val)\n    \n    def _insert_helper(self, node, val):\n        if val < node.val:\n            if node.left:\n                self._insert_helper(node.left, val)\n            else:\n                node.left = TreeNode(val)\n        else:\n            if node.right:\n                self._insert_helper(node.right, val)\n            else:\n                node.right = TreeNode(val)\n```\n\n## Usage\n```python\nbst = BST()\nbst.insert(50)\nbst.insert(30)\nbst.insert(70)\n```",
        "supported_languages": ["python", "java", "c++", "javascript"],
        "grounding_score": 0.88
      }
    },
    
    "ingest_handwritten": {
      "method": "POST",
      "path": "/courses/{course_id}/handwritten/ingest",
      "description": "OCR handwritten notes, convert to LaTeX, and ingest into RAG",
      "authentication": "Required",
      "path_parameters": {
        "course_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "request_example": {
        "image": "https://cloudflare-r2.example.com/uploads/handwritten-notes-week3.jpg"
      },
      "response_example": {
        "id": "handwritten-note-abc123",
        "course_id": "550e8400-e29b-41d4-a716-446655440000",
        "original_image_url": "https://cloudflare-r2.example.com/uploads/handwritten-notes-week3.jpg",
        "latex_output": "\\section{AVL Tree Rotations}\n\n\\subsection{Left Rotation}\nWhen a node's right child has a balance factor of +2:\n\\begin{itemize}\n\\item Promote right child to parent position\n\\item Move original parent to left child position\n\\item Adjust pointers accordingly\n\\end{itemize}\n\n\\subsection{Time Complexity}\nAll rotations are $O(1)$ operations."
      }
    },
    
    "validate_material": {
      "method": "POST",
      "path": "/materials/{material_id}/validate",
      "description": "Run validation and evaluation on generated material",
      "authentication": "Required",
      "path_parameters": {
        "material_id": "material-lab-def456"
      },
      "request_example": "No body required",
      "response_example": {
        "syntax": "valid",
        "grounding_score": 0.88,
        "tests_passed": true,
        "final_verdict": "approved"
      }
    },
    
    "create_chat_session": {
      "method": "POST",
      "path": "/chat/session",
      "description": "Create a new chat session for a course",
      "authentication": "Required",
      "request_example": {
        "course_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "response_example": {
        "id": "session-abc123-xyz789",
        "user_id": "user-def456",
        "course_id": "550e8400-e29b-41d4-a716-446655440000"
      }
    },
    
    "chat": {
      "method": "POST",
      "path": "/chat/{session_id}",
      "description": "Conversational chat with course-aware context",
      "authentication": "Required",
      "path_parameters": {
        "session_id": "session-abc123-xyz789"
      },
      "request_examples": {
        "simple_question": {
          "message": "What is the time complexity of AVL tree insertion?"
        },
        "implementation_question": {
          "message": "Can you show me how to implement left rotation in Python?"
        },
        "comparison_question": {
          "message": "What's the difference between BST and AVL tree?"
        },
        "follow_up": {
          "message": "Can you explain that in simpler terms?"
        }
      },
      "response_example": {
        "answer": "The time complexity of AVL tree insertion is O(log n) in all cases - best, average, and worst. This is because AVL trees maintain a strict balance constraint where the height difference between left and right subtrees is at most 1. After insertion, if the tree becomes unbalanced, rotation operations (which are O(1)) restore balance. Since the tree height is always O(log n), both the search path to find the insertion point and any subsequent rotations result in O(log n) time complexity."
      }
    },
    
    "health_check": {
      "method": "GET",
      "path": "/health",
      "description": "Health check endpoint",
      "authentication": "Not required",
      "request_example": "No body required",
      "response_example": {
        "status": "ok"
      }
    },
    
    "root": {
      "method": "GET",
      "path": "/",
      "description": "Root endpoint",
      "authentication": "Not required",
      "request_example": "No body required",
      "response_example": {
        "message": "AI API Platform - Course Management",
        "version": "1.0.0"
      }
    }
  },
  
  "error_responses": {
    "validation_error_422": {
      "detail": [
        {
          "loc": ["body", "course_id"],
          "msg": "field required",
          "type": "value_error.missing"
        }
      ]
    },
    "authentication_error_401": {
      "detail": "Invalid or missing authentication token"
    },
    "not_found_404": {
      "detail": "Course not found"
    }
  },
  
  "workflow_examples": {
    "complete_course_setup": {
      "description": "Admin workflow for setting up a new course",
      "steps": [
        {
          "step": 1,
          "action": "Create course",
          "endpoint": "POST /admin/courses",
          "input": {
            "code": "CSE220",
            "title": "Data Structures and Algorithms",
            "description": "Comprehensive DS&A course"
          }
        },
        {
          "step": 2,
          "action": "Upload course material",
          "endpoint": "POST /storage/upload",
          "input": {
            "file": "week3-avl-trees.pdf",
            "file_type": "pdf",
            "folder": "courses/cse220/week3"
          }
        },
        {
          "step": 3,
          "action": "Ingest content",
          "endpoint": "POST /admin/content/ingest",
          "input": {
            "course_id": "550e8400-e29b-41d4-a716-446655440000",
            "category": "theory",
            "content_type": "slide",
            "file_url": "https://r2.example.com/courses/cse220/week3/avl-trees.pdf",
            "week": 3,
            "topic": "AVL Tree"
          }
        }
      ]
    },
    
    "student_learning_session": {
      "description": "Student using chat and search for learning",
      "steps": [
        {
          "step": 1,
          "action": "Create chat session",
          "endpoint": "POST /chat/session",
          "input": {
            "course_id": "550e8400-e29b-41d4-a716-446655440000"
          }
        },
        {
          "step": 2,
          "action": "Ask question",
          "endpoint": "POST /chat/{session_id}",
          "input": {
            "message": "Explain AVL tree rotations"
          }
        },
        {
          "step": 3,
          "action": "Search for diagrams",
          "endpoint": "POST /courses/{course_id}/search/images",
          "input": {
            "query": "AVL rotation diagram",
            "top_k": 5
          }
        },
        {
          "step": 4,
          "action": "Get implementation code",
          "endpoint": "POST /courses/{course_id}/search",
          "input": {
            "query": "Python AVL rotation implementation",
            "category": "lab",
            "language": "python"
          }
        }
      ]
    },
    
    "ai_material_generation": {
      "description": "Generate and validate AI-created course materials",
      "steps": [
        {
          "step": 1,
          "action": "Generate theory notes",
          "endpoint": "POST /courses/{course_id}/generate/theory",
          "input": {
            "topic": "Binary Search Tree",
            "depth": "exam-oriented"
          }
        },
        {
          "step": 2,
          "action": "Validate generated material",
          "endpoint": "POST /materials/{material_id}/validate",
          "input": "No body required"
        },
        {
          "step": 3,
          "action": "Generate lab code",
          "endpoint": "POST /courses/{course_id}/generate/lab",
          "input": {
            "topic": "BST insertion",
            "language": "python"
          }
        },
        {
          "step": 4,
          "action": "Generate video from material",
          "endpoint": "POST /courses/{course_id}/media/generate",
          "input": {
            "type": "content-to-video",
            "material_id": "material-theory-abc123",
            "style": "lecture"
          }
        }
      ]
    },
    
    "handwritten_notes_processing": {
      "description": "Process and ingest handwritten student notes",
      "steps": [
        {
          "step": 1,
          "action": "Upload handwritten note image",
          "endpoint": "POST /storage/upload",
          "input": {
            "file": "handwritten-notes.jpg",
            "file_type": "image",
            "folder": "notes/week3"
          }
        },
        {
          "step": 2,
          "action": "OCR and convert to LaTeX",
          "endpoint": "POST /courses/{course_id}/handwritten/ingest",
          "input": {
            "image": "https://r2.example.com/notes/week3/handwritten-notes.jpg"
          }
        },
        {
          "step": 3,
          "action": "Search processed notes",
          "endpoint": "POST /courses/{course_id}/search",
          "input": {
            "query": "rotation formulas",
            "top_k": 5
          }
        }
      ]
    }
  },
  
  "feature_categories": {
    "content_management": {
      "description": "Admin tools for managing course content",
      "endpoints": [
        "POST /admin/courses",
        "POST /admin/content/ingest",
        "GET /courses",
        "GET /courses/{course_id}",
        "GET /courses/{course_id}/contents"
      ]
    },
    "search_and_retrieval": {
      "description": "RAG-powered search across course materials",
      "endpoints": [
        "POST /courses/{course_id}/search",
        "POST /courses/{course_id}/search/images",
        "GET /namespaces"
      ]
    },
    "ai_generation": {
      "description": "AI-powered content generation and validation",
      "endpoints": [
        "POST /courses/{course_id}/generate/theory",
        "POST /courses/{course_id}/generate/lab",
        "POST /courses/{course_id}/media/generate",
        "POST /materials/{material_id}/validate"
      ]
    },
    "conversational_interface": {
      "description": "Chat-based learning assistant",
      "endpoints": [
        "POST /chat/session",
        "POST /chat/{session_id}"
      ]
    },
    "ocr_and_processing": {
      "description": "Handwritten note processing",
      "endpoints": [
        "POST /courses/{course_id}/handwritten/ingest"
      ]
    },
    "storage": {
      "description": "File upload and management",
      "endpoints": [
        "POST /storage/upload"
      ]
    }
  },
  
  "notes": {
    "authentication": "Include Bearer token in Authorization header: 'Authorization: Bearer YOUR_TOKEN'",
    "namespaces": "Each course has its own namespace (course_id) for content isolation",
    "content_categories": "Content is categorized as 'theory' (lectures, slides, notes) or 'lab' (code, implementations)",
    "content_types": "Supported types: slide, pdf, code, note, image",
    "languages": "Common languages: python, java, c++, javascript, go",
    "media_generation": "Only educational media types supported (content-to-video, slides-to-video, theory-diagram)",
    "chat_context": "Chat sessions maintain conversation history for follow-up questions",
    "validation": "Generated materials undergo syntax checking, grounding score evaluation, and test validation"
  }
}